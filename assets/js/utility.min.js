const $=e=>document.getElementById(e),q=e=>document.querySelector(e),showHideScrim=()=>{const e=q(".loading-scrim");e.classList.toggle("hidden"),q(".loading-scrim > div.mdc-circular-progress").MDCCircularProgress.determinate=e.classList.contains("hidden")},showMsg=e=>{const o=$("msgSnackbar").MDCSnackbar;o.labelText=e,o.open()};document.body.addEventListener("mousedown",function(){document.body.classList.add("using-mouse")}),document.body.addEventListener("keydown",function(e){9===e.keyCode&&document.body.classList.remove("using-mouse")});let cUser=null;firebase.auth().onAuthStateChanged(e=>{if(e){if(cUser=e,"undefined"!=typeof isLoginPg){const e=new URLSearchParams(window.location.search).get("redirect");window.location=e?atob(e):"index.html"}else showMsg(`Signed in as ${e.displayName}`);window.history.replaceState({},document.title,window.location.pathname+window.location.search.replace(/redirect=.*&/m,""))}else cUser=null,"undefined"==typeof isLoginPg?(window.location="login.html?redirect="+btoa(window.location.href),showMsg("You are signed out")):initFUI()});const getTheme=()=>"dark"===localStorage.pageTheme,refreshTheme=()=>{getTheme()?document.body.classList.remove("light"):document.body.classList.add("light")},setTheme=e=>{localStorage.pageTheme=e?"dark":"light",refreshTheme()};refreshTheme();