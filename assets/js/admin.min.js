const spinner=$("editorLoading");spinner.MDCCircularProgress.determinate=!1;const storageRef=firebase.storage().ref(),fPickerElem=$("fileUpload"),db=firebase.firestore();$("submitBtn").onclick=()=>{tinyMCE.activeEditor.getContent();const e=storageRef.child(fPickerElem.files[0].name).put(fPickerElem.files[0]);e.on("state_changed",e=>{$("file-upload-progress").MDCLinearProgress.progress=e.bytesTransferred/e.totalBytes},e=>{console.error(e)},()=>{showMsg("Upload completed"),e.snapshot.ref.getDownloadURL().then(e=>{console.log("File available at",e);let t=$("resourceLink").value;db.collection("articles").add({content:tinyMCE.activeEditor.getContent(),link:e,resourceLink:t.split("\n").map(function(e){return e.trim()})}).then(e=>{console.log("Document written with ID: ",e.id)}).catch(e=>{console.error("Error adding document: ",e)})})})},$("uploadBtn").onclick=()=>{$("fileUpload").click()},fPickerElem.onchange=e=>{const t=new FileReader;t.onload=e=>{$("testimg").src=e.target.result},t.readAsDataURL($("fileUpload").files[0]),$("uploadFName").textContent=`Selected file(s): ${e.target.files[0].name}`},tinymce.init({selector:"textarea#contentEditor",height:400,min_height:110,max_height:1e3,menubar:!1,plugins:["advlist autolink lists link image charmap print preview anchor","searchreplace visualblocks code fullscreen","insertdatetime media table paste code help wordcount"],toolbar:"undo redo | formatselect | bold italic backcolor | alignleft aligncenter alignright alignjustify | bullist numlist outdent indent | removeformat | help",help_tabs:["shortcuts","keyboardnav"],skin:"oxide-dark",content_style:"body { font-family:Roboto,Helvetica,Arial,sans-serif; font-size:14px }",content_css:"dark"}).then(()=>{console.log("Loaded"),spinner.style.display="none",spinner.MDCCircularProgress.determinate=!0,document.querySelectorAll(".tox .tox-tbtn").forEach(e=>{e.classList.add("mdc-ripple-surface"),e.setAttribute("data-mdc-auto-init","MDCRipple")}),mdc.autoInit()});